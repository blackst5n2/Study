센서, 디스플레이, 메모리 등 세상의 모든 전자 부품은 세 가지 언어 중 하나를 씀, 각각의 **물리적 연결 방식(Hardware)** 과 **데이터르 보내는 규칙(Protocol)** 이 어떻게 다른지 비교하며 배우는 것이 핵심.

# UART (Universal Asynchronous Receiver/Transmitter)
가장 단순하고, 오래되었지만, 디버깅(printf) 때문에 영원히 사라지지 않을 프로토콜.
- 별명: "고독한 2인 전용 전화기"
- 하드웨어 연결: 선 2개 (+ GND)
	- TX (Transmit): 말하는 입
	- RX (Receive): 듣는 귀
	- 특징: 내 입(TX)은 상대방 귀(RX)에 연결해야 함. (교차 연결, Cross Connection)

#### 하드웨어적 특징: "클럭이 없다 (Asynchronous)"
UART의 가장 큰 특징은 동기화 신호(Clock) 선이 없다는 것.
- 문제: 내가 "안녕"이라고 보낼 떄, 상대방이 얼마나 빠른 속도로 받아적어야 할지 모름.
- 해결 (Baud Rate): 미리 약속을 함. "우리 1초에 9600비트 속도로 주고받자!" (예: `9600 bps`, `115200 bps`)
- 단점: 약속된 속도가 조금이라도 다르면 글자가 깨짐. (예: `뷁궰쨟왥...` 같은 외계어 출력)

	주요 용도: PC와 보드 간의 통신(디버깅 콘솔), GPS 모듈, 블루투스 모듈 등 1:1 통신.

# I2C (Inter-Integrated Circuit)
필립스(현 NXP)에서 만든 **"버스(Bus)** 구조의 프로토콜. 선 2개만 있으면 수십, 수백 개의 센서를 병렬로 연결할 수 있음.
- 별명: "회의실의 사회자(Master)와 참가자들(Slaves)"
- 하드웨어 연결: 선 2개 (+ GND)
	- SDA (Serial Data): 데이터가 오가는 길
	- SCL (Serial Clock): 박자를 맞춰주는 클럭 신호 (Master가 생성)

#### 하드웨어적 특징: "주소(Address)와 오픈 드레인(Open-Drain)"
1. 주소: 모든 슬레이브(센서)는 고유한 **ID(주소)** 를 가짐. (예: 온도 센서는 `0x48`)
	- Master: "야, `0x48`번! 너 온도 몇 도야?" (SDA 선에 주소를 쏘아 보냄)
	- Slave: 자기 주소를 부른 걸 확인한 놈만 대답함. 나머지는 무시함.
2. 오픈 드레인 & 풀업 저항: 이게 가장 중요함. I2C 핀은 스스로 전압을 3.3V로 올리는 능력이 없음(0V로 당길 수만 있음). 그래서 회로도에 반드시 **풀업 저항(Pull-up Resistor)** 이 달려 있어야 통신이 됨. (초보자가 가장 많이 하는 실수!)

	주요 용도: 속도는 느리지만(100kHz ~ 400kHz), 핀을 적게 쓰고 여러 개를 연결해야 할 때. (온도/습도 센서, 터치스크린 좌표, EEPROM 등)

# SPI (Serial Peripheral Interface)
모토로라에서 만든 **"고속도로"** 임. I2C보다 선은 많이 쓰지만, 속도가 압도적으로 빠름.
- 별명: "고속 컨베이어 벨트"
- 하드웨어 연결: 선 4개 (보통 4-wire라고 함)
	- SCLK (Serial Clock): 클럭 (Master가 생성)
	- MOSI (Master Out Slave In): 마스터가 주는 데이터
	- MISO (Master In Slave Out): 슬레이브가 주는 데이터
	- CS (Chip Select): "너 나랑 얘기하자"라고 콕 찍는 신호

#### 하드웨어적 특징: "시프트 레지스터(Shift Register)"
SPI의 동작 원리는 원형 컨베이어 벨트와 같음.
- 클럭이 한 번 `틱` 할 때마다, 마스터의 비트 하나가 슬레이브로 밀려 들어가고(MOSI), 동시에 슬레이브의 비트 하나가 마스터로 밀려 나옴(MISO).
- Full-Duplex: 말하면서 동시에 들을 수 있음. (전이중 통신)
- 속도가 수십 MHz(수십 Mbps)에 달해, I2C보다 100배 이상 빠를 수 있음.

	주요 용도: 대용량 데이터를 빨리 보내야 할 때. (LCD 디스플레이, SD 카드, 이더넷 모듈, 고속 IMU 센서)

# 3대장 비교 요약 (면접 단골 질문)
임베디드 엔지니어는 상황에 맞춰 이 셋 중 하나를 골라야 함.

| 특징    | UART         | I2C              | SPI                      |
| ----- | ------------ | ---------------- | ------------------------ |
| 선 개수  | 2개 (TX, RX)  | 2개 (SDA, SCL)    | 4개 (SCK, MOSI, MISO, CS) |
| 통신 방식 | 1:1 (비동기)    | 1:N (동기, 주소 기반)  | 1:! 또는 1:N (동기, CS 기반)   |
| 속도    | 느림 (~Mbps)   | 보통 (~400kHz)     | 매우 빠름 (~수십 MHz)          |
| 복잡도   | 단순함 (타이밍 중요) | 복잡함 (주소, ACK 확인) | 단순함 (하드웨어 쉬프트)           |
| 특이사항  | 클럭 없음        | 풀업 저항 필수         | 핀을 많이 차지함                |

# 실전 코딩 팁: 라이브러리를 볼 때
이 프로토콜들을 제어하는 함수를 볼 때, 이제 하드웨어가 보여야 함.
- `HAL_I2C_Master_Transmit(&hi2c1, 0xA0, ...)`
	- -> "아, 시작 신호(Start Condition) 보내고, `0xA0` 주소 쏘고, 상대방이 `ACK` 날려주는지 기다리겠구나."
- `HAL_SPI_TransmitReceive(...)`
	- -> "아, 내가 데이터를 보냄과 동시에 저쪽 데이터도 내 쪽으로 밀려 들어오겠구나. (스레기 값이 들어와도 읽어는 둬야 함)"

> SPI로 통신하면 속도가 엄청 빠른데, CPU가 그 데이터를 1바이트씩 옮기느라 다른 일을 못 한다면?
> 
> "사장님 CPU은 결재만 하고, 짐 나르는 건 알바생에게 시키자."
> 
> 임베디드 성능 최적화의 꽃, **DMA (Direct Memory Access)**. 통신(UART/I2C/SPI)과 DMA를 결합하면 CPU 부하를 0%로 만들면서 데이터를 전송할 수 있음.

