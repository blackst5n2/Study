#### 계층적 구조: OSI 7 계층 모델
네트워크 통신은 매우 복잡함. 이를 단순화하고 표준화하기 위해, 통신의 기능을 **독립적인 계층(Layer)** 으로 나누어 정의함. 가장 대표적인 것이 OSI 7 계층 모델과 이를 현실적으로 구현한 TCP/IP 4 계층 모델임.
- 목표: 각 계층은 자신이 맡은 역할만 수행하며, 상위 계층에게는 서비스를 제공하고, 하위 계층에게는 서비스를 요청함. 이로써 복잡한 문제를 모듈화함.

| OSI 계층  | 계층 이름            | 역할                                       | 연결 고리                              |
| ------- | ---------------- | ---------------------------------------- | ---------------------------------- |
| 7 (최상위) | 응용 (Application) | 사용자에게 직접 서비스 제공 (HTTP, DNS, SMTP)        | Raft/Paxos와 같은 분산 애플리케이션이 동작하는 계층. |
| 4       | 전송 (Transport)   | 프로세스 대 프로세스 통신 (포트 번호), 신뢰성/흐름/혼잡 제어.    | TCP를 통해 Raft 로그의 신뢰성 보장.           |
| 3       | 인터넷 (Network)    | 호스트 대 호스트 통신 (IP 주소), 패킷의 최적 경로 결정 (라우팅) | IP 주소 기반의 패킷 전송.                   |
| 1 (최하위) | 물리 (Physical)    | 비트 전송 (전기 신호, 광 신호 등)                    | ADC와 같은 하드웨어 인터페이스의 근간.            |

#### 전송 계층 (Transport Layer): 신뢰성의 확보
전송 계층의 핵심은 두 가지 프로토콜인 TPC와 UDP의 이해임.

##### TCP (Transmission Control Protocol)
- 특징: 연결 지향 (Connection-Oriented), 신뢰성 보장, 순서 보장, 흐름 제어, 혼잡 제어 제공.
- 작동 원리:
	- 3-way Handshake: 연결을 설정할 때 SYN-SYN/ACK-ACK 3단계를 거쳐 신뢰성을 확보.
	- Sequence Number & ACK: 패킷(Segment)에 순서 번호를 부여하고, 수신 측은 받은 패킷에 대해 **ACK(응답)** 를 보내어 패킷 손실 여부를 확인하고 재전송함.
- 연결고리: Raft/Paxos와 같은 분산 합의 알고리즘은 높은 신뢰성이 필수적이므로, 보통 TCP 위에서 동작함.

##### 혼잡 제어 (Congestion Control)
- 목표: 네트워크가 수용할 수 있는 속도 이상으로 데이터를 보내지 않도록 송신 속도를 조절하야 네트워크 마비를 막는 것.
- 원리: TCP는 Slow Start (느린 시작), Congestion Avoidance (혼합 회피) 등의 알고리즘을 사용하여 네트워크 상태에 따라 윈도우 크기(한 번에 보낼 수 있는 데이터 양)를 동적으로 조절함.

#### 인터넷 계층 (Network Layer): 경로의 결정
인터넷 계층의 핵심은 **IP (Internet Protocol)** 와 **라우팅(Routing)** 임.

##### IP (Internet Protocol)
- 목적: 패킷(Packet)을 최종 목적지(Host)까지 전달하는 주소 지정 및 라우팅 기능을 제공.
- 특징: 비연결형 (Connectionless), 비신뢰성 (Best-effort). 패킷이 유실되거나 순서가 뒤바뀔 수 있으며, 이를 복구하는 것은 상위 계층(TCP)의 역할임.

##### 라우팅 (Routing)
- 목표: 출발지에서 목적지까지 패킷을 전달하기 위한 최적 경로를 경정하는 것.
- 원리: 라우터들은 라우팅 알고리즘 (예: Link-State 또는 Distance-Vector)을 사용하여 네트워크 지도를 구축하고, 이를 기반으로 Floyd-Warshall이나 Dijkstra와 유사한 원리로 최단 경로를 계산함.
- 연결고리: Dijkstra 알고리즘이 바로 OSPF와 같은 주요 라우팅 프로토콜에서 사용되는 핵심 알고리즘임.

#### 분산 시스템의 연결고리
모든 분산 기술은 이 네트워크 계층 위에서 작동함.
- Consistent Hashing: 서버들이 네트워크 상의 IP 주소를 가지며, 이 IP 주소를 해시 링에 배치하여 부하 분산을 함.
- Raft/Paxos: 노드들이 네트워크를 통해 메시지를 주고받으며 투표하고 로그를 복제함. 네트워크의 지연(Latency)과 패킷 손실(Packet Loss)이 합의 알고리즘의 성능과 안정성에 직접적인 영향을 미침.
