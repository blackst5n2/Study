#### CPU 스케줄링 (CPU Scheduling): '시간' 관리의 예술

##### 목표: CP 활용률 극대화와 응답 시간 최소화
OS는 여러 프로세스/스레드에게 CPU를 공펴하거나 효율적으로 배분해야 함. 이는 어떤 프로세스를 언제, 얼마나 오랫동안 실행할지 결정하는 문제임.

##### 스케줄링의 분류
1. 비선점형 (Non-preemptive): 프로세스가 자발적으로 CPU를 반납할 때까지 계속 실행함.
	- 단점: CPU 독점 가능성 (긴 작업이 다른 작업의 응답 시간을 지연시킴).
2. 선점형 (Preemptive): OS의 스케줄러가 강제로 CPU를 빼앗아 다른 프로세스에게 할당할 수 있음. (현대 OS의 표준)
	- 원리: **타임 슬라이스(Time Slice)** 를 부여하거나, 더 높은 우선순위의 작업이 들어오면 강제 교체함.

##### 주요 스케줄링 알고리즘의 원리
| 알고리즘                            | 원리                   | 장점                    | 단점                                         |
| ------------------------------- | -------------------- | --------------------- | ------------------------------------------ |
| FCFS (First-Come, First-Served) | 도착 순서대로 처리           | 단순하고 구현 용이.           | '호위 효과(Convoy Effect)' (긴 작업이 앞을 막아 모두 대기) |
| SJF (Shortest Job First)        | 실행 시간이 가장 짧은 작업부터 처리 | 평균 대기 시간 최소화 (이론상 최적) | 실행 시간을 미리 알 수 없음 (비현실적), 기아 현상 위험          |
| Priority Scheduling             | 우선순위가 높은 작업부터 처리     | 중요 작업에 대한 빠른 응답 보장.   | 낮은 우선순위 작업의 기아 현상(Starvation) 위험.          |
| Round Robin (RR)                | 타임 슬라이스 부여 후 선점형 스위칭 | 공정성 보장, 응답 시간 예측 가능   | 타임 슬라이스 크기에 따라 오버헤드 (문맥 교환 비용)가 증가.        |
통찰: 현대 OS(Windows, Linux)는 보통 **다단계 피드백 큐 (Multilevel Feedback Queue)** 라느 복잡한 하이브리드 방식을 사용함. 이는 여러 개의 큐를 두고, 짧은 작업은 높은 우선순위 큐(RR), 긴 작업은 낮은 우선순위 큐에 배치하여 응답시긴과 처리율을 모두 높이려는 시도임.

#### 동기화 (Synchronization): '자원' 사용의 질서
##### 목표: 공유 자원 사용 시 데이터 무결성 보장
프로세스/스레드가 메모리(특히 힙)와 같은 공유 자원에 동시에 접근할 때, 예상치 못한 결과가 발생하는 것을 막는 것이 동기화의 목적임.

##### 경쟁 상태 (Race Condition)와 임계 영역 (Critical Section)
- 경쟁 상태 (Race Condition): 둘 이상의 스레드가 동시에 공유 데이터를 접근 및 조작할 때, 최종 결과가 접근 순서에 따라 달라지는 현상.
	- 연결고리: `Pool Allocator`의 `Free List`를 두 스레드가 동시에 건드린다면, 리스트가 엉켜 할당 오류를 일으킬 수 있음.
- 임계 영역 (Critical Section): 공유 자원에 접근하는 코드의 일부분임. 동기화는 오직 이 임계 영역에 한 번에 하나의 스레드만 접근하도록 보장하는 것.

##### 동기화 메커니즘 (Synchronization Primitives)
임계 영역 문제를 해결하기 위해 OS가 제공하는 기본적인 도구들임.
1. 뮤텍스 (Mutex, Mutual Exclusion):
	- 원리: 상호 배제(Mutex)를 의미함. 임계 영역에 진입하려는 스레드는 **락(Lock)** 을 획득하고, 나올 때 락을 해제함. 락이 걸려 있으면 다른 스레드는 대기함.
	- 용도: 자원의 소유권을 명확히 할 때 사용 (가장 단순하고 자주 쓰임).
2. 세마포어 (Semaphore):
	- 원리: **카운터(정수 값)** 를 가진 동기화 도구임. 뮤텍스가 0과 1의 이진 카운터라면, 세마포어는 임으의 정수 카운터를 가짐.
	- 용도: 동시에 자원에 접근 가능한 스레드의 수를 제한하거나 (자원 가용성 제어), 프로세스 간의 신호 전달에 사용됨.

##### 교착 상태 (Deadlock)
동기화 메커니즘을 잘못 사용하면 시스템이 영원히 멈추는 현상이 발생할 수 있음.
- 정의: 두 개 이상의 스레드가 각자 상대방이 소유한 자원을 기다리면서, 영원히 대가 상태에 빠지는 상황.
- 교착 상태 발생의 4가지 필요 조건 (모두 충족 시 발생):
	1. 상호 배제 (Mutual Exclusion): 자원은 한 번에 한 프로세스만 사용 가능해야 함.
	2. 점유와 대기 (Hold and Wait): 자원을 소유한 채 다른 자원을 기다려야 함.
	3. 비선점 (No Preemption): 자원을 강제로 빼앗을 수 없어야 함.
	4. 순환 대기 (Circular Wait): 대기하는 프로세스들의 고리가 순환 구조를 이루어야 함.
