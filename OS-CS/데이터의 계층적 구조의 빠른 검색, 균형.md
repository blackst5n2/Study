**계층적 데이터 구조(Hierarchical Data Structures)** 의 핵심인 **트리(Tree)**.

**$O(1)$ 해시 테이블** 은 ㅇ순서를 유지할 수 없으면, $O(\log N)$ **힙** 은 오직 최대/최소 우선순위만 보장했음. **트리 구조** 는 **데이터의 순서(Order)** 를 유지하면서 **빠른 검색$(O(\log N))$** 을 가능하게 하는 자료구조임.

# 이진 탐색 트리 (BST: Binary Search Tree)
트리 구조의 가장 기본이 되는 형태임.

#### 구조와 원리
- 이진 속성: 모든 노드는 **최대 두 개의 자식 노드** 를 가짐.
- 탐색 속성: 모든 노드에 대해 **왼쪽 자식 트리의 값은 노드 자신보다 작고, 오른쪽 자식 트리의 값은 노드 자신보다 큼.**

#### 성능과 문제점
- 평균 성능: 데이터가 무작위로 삽입될 경우. 트리는 균형 잡힌 형태로 유지되어 검색 시간은 **트리의 높이** 와 동일한 **$O(\log N)$** 을 가짐. (매우 빠름)
- 최약의 성능: 데이터가 **오름차순** 이나 **내림차순** 으로 삽입되면 트리가 한쪽으로만 기울어져 **편향 트리(Skewed Tree)** 가 됨. 이 경우 트리는 사실상 **연결 리스트** 와 동일해져 검색 시간이 **$O(N)$** 으로 급격히 나빠짐.

# 균형 잡기: AVL과 Red-Black Tree
BST의 최악의 경우($O(N)$) 문제를 해결하고 항상 $O(\log N)$ 의 성능을 보장하기 위해 **자가 균형 이진 탐색 트리(Self-Balancing BST)** 가 고안되었음.

#### AVL Tree
- 균형 조건: 모든 노드에서 **왼쪽 서브 트리와 오른쪽 서브 트리의 높이 차이가 1 이하** 여야 함. (가장 엄격한 균형)
- 균형 복구: 삽입/삭제 후 조건이 깨지면 **회전(Rotation)** 연산을 수행하여 균형을 즉시 복구함.
- 특징: 검색 속도는 가장 빠르지만, 삽입/삭제 시 회전 연산이 잦아 **쓰기(Write) 작업 부하** 가 큼.

Red-Black Tree (RBT)
- 균형 조건: 노드에 **'빨강(Red)'** 또는 **'검정(Black)'** 속성을 부여하고, 특정 규칙(예: 루트는 항상 검정, 빨강 노드의 자식은 항상 검정 등)을 통해 **'대략적인 균형'** 을 유지함.
- 특징: AVL보다 균형 조건이 덜 엄격하여 트리의 높이 차이가 2배까지 날 수 있음. 하지만 삽입/삭제 시 회전 횟수가 적어 **쓰기 성능** 이 AVL보다 좋음.
- 실제 활용: 자바의 `TreeMap`, C++의 `std::map`, 리눅스 커널의 메모리 관리 등 **실제 시스템에서 가장 널리 사용** 됨. (검색과 쓰기의 적절한 균형)

# 디스크를 위한 구조: B-Tree와 B+Tree
BST, AVL, RBT는 데이터가 CPU **메모리(RAM)** 에 있을 때 최적화된 구조임. 반면, **데이터베이스** 처럼 데이터가 **디스크(HDD/SDD)** 에 있을 때는 **B-Tree** 를 사용함.

#### 디스크 I/O 최적화의 원리
우리가 배운 대로, 디스크 접근(I/O)은 RAM 접근보다 **수천 배** 느림. B-Tree는 이 I/O 횟수를 최소화하는 데 초점을 맞춤.
1. 높은 분산도 (High Fan-out): B-Tree는 노드당 **수많은 자식 포인터** 를 가질 수 있음.
2. 노드 크기: B-Tree의 각 노드 크기는 디스크의 **페이즈(Page) 또는 블록(Block) 크기(4KB~16KB)** 와 정확히 일치하도록 설계됨.

#### B-Tree의 압도적 효율
- 원리: 노드 하나를 읽는 것은 **디스크 I/O 1회** 임. 노드 크기를 키워 노드당 수백 개의 키를 담으면, 수억 개의 데이터를 찾기 위해 **단 3~5번의 디스크 I/O** 만으로 충분함.
- B+Tree: B-Tree의 변형으로, **모든 데이터 포인터가 오직 리프(Leaf) 노드에만** 존재하며, 리프 노들이 **연결 리스트**로 연결되어 있음. 이는 **순차 검색(Range Query)** 에 극도로 유리하여, **대부분의 상용 데이터베이스 인덱스** 로 채택됨.

